<h1><code ng:non-bindable=""></code>
<span class="hint"></span>
</h1>
<div><h2 id="gettingstarted">Getting started</h3>

<p>To use the SDK, you need to</p>

<ol>
<li>init the SDK; e.g.,</li>
</ol>

<pre class="prettyprint linenums">
FamilySearch.init({
  app_key: 'YOUR_ACCESS_KEY_GOES_HERE',
  environment: 'sandbox',
  // auth_callback is the URI you registered with FamilySearch;
  // the page does not need to exist but it must have the same host and port
  // as the server running your script
  auth_callback: 'REDIRECT_GOES_HERE',
  http_function: jQuery.ajax,
  deferred_function: jQuery.Deferred
});
</pre>

<ol>
<li>get an access token; e.g.,</li>
</ol>

<pre class="prettyprint linenums">
FamilySearch.getAccessToken().then(function(response) {
   // now you have an access token
});
</pre>

<ol>
<li>make API calls; e.g.,</li>
</ol>

<pre class="prettyprint linenums">
FamilySearch.getCurrentUser().then(function(response) {
   // now you have the response
});
</pre>

<h2 id="promises">Promises</h3>

<p>Most functions return promises.  The returned promises are roughly identical to the promises returned by the
<code>http_function</code> you passed into the <code>FamilySearch.init</code> call, with the following differences:</p>

<p><strong>NOTE: In the near future, the description below will hold for promises returned from plumbing functions, but
promises returned from API functions will be fulfilled with a data parameter only</strong></p>

<p><strong>jQuery</strong></p>

<p>Requires jQuery 1.8 or later.</p>

<p>If you pass <code>jQuery.ajax</code> and <code>jQuery.Deferred</code> into the <code>FamilySearch.init</code> call, the returned promises
will have the following methods, described in detail at http://api.jquery.com/jQuery.ajax/</p>

<ul>
<li>done(function(data, textStatus, jqXHR) {})</li>
<li>fail(function(jqXHR, textStatus, errorThrown) {})</li>
<li>always(function(data|jqXHR, textStatus, jqXHR|errorThrown) {})</li>
<li>then(function(data, textStatus, jqXHR) {}, function(jqXHR, textStatus, errorThrown) {})</li>
<li>getResponseHeader(header)</li>
<li>getAllResponseHeaders()</li>
</ul>

<p>In addition, the following function is available when the promise is fulfilled</p>

<ul>
<li>getData()</li>
</ul>

<p>And the following function is available when the promise is fulfilled or rejected</p>

<ul>
<li>getStatusCode()</li>
</ul>

<p>The following functions and properties are not available on the promise returned, but are available on the jqXHR
parameter of the done, fail, always, and then methods</p>

<ul>
<li>abort()</li>
<li>statusCode()</li>
<li>responseText</li>
<li>responseXML</li>
<li>readyState</li>
<li>status</li>
<li>statusText</li>
</ul>

<p><strong>AngularJS -- not yet implemented</strong></p>

<p>If you pass <code>$http</code> and <code>$q.defer</code> into the <code>FamilySearch.init</code> call, the returned promises
will have the following methods, described in detail at http://docs.angularjs.org/api/ng.$http</p>

<ul>
<li>success(function(data, status, headers, config) {})</li>
<li>error(function(data, status, headers, config) {})</li>
<li>then(function({data: data, status: status, headers: headers, config: config}) {}, function({data: data, status: status, headers: headers, config: config}) {})</li>
<li>finally(function(data, status, headers, config) {}) // TODO is this right?</li>
</ul>

<p>In addition, the following function is available when the promise is fulfilled</p>

<ul>
<li>getData()</li>
</ul>

<p>And the following functions are available when the promise is fulfilled or rejected</p>

<ul>
<li>getResponseHeader(header)</li>
<li>getAllResponseHeaders()</li>
<li>getStatusCode()</li>
</ul>

<p><strong>Node.js -- not yet implemented</strong></p>

<h2 id="plumbing">Plumbing</h3>

<p>The functions in the "plumbing" module are low-level functions that you would not normally call.
The higher-level functions that you normally call are built on top of the plumbing functions.
The plumbing functions are exposed in case you want to do something not anticipated by the higher-level functions.
The plumbing functions here serve the same purpose as the
<a href="https://www.kernel.org/pub/software/scm/git/docs/#_low_level_commands_plumbing">plumbing functions in git</a>.</p></div>
